package graphic_zip;

import java.awt.Image;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

import javax.imageio.ImageIO;

import com.sun.image.codec.jpeg.JPEGCodec;
import com.sun.image.codec.jpeg.JPEGEncodeParam;
import com.sun.image.codec.jpeg.JPEGImageEncoder;

import net.coobird.thumbnailator.Thumbnails;





public class filecompress {
	
	  private float IntialCompressRate = 1f;
	
	
	  public filecompress(float IntialCompressRate) {
		  
		  this.IntialCompressRate = IntialCompressRate;
		  
	  }
	
	  public filecompress() {
		  
		   this.IntialCompressRate = 0.25f;
		   
	  }
	
	  public String compressPic(String inputDir, 
			                           String outputDir,
			                           String inputFileName,
			                           String outputFileName) {    
		  
      	String InPutFileInformation = inputDir + inputFileName;
    	
        File InPutFile = new File(InPutFileInformation); 
		  
	        try {  
	        
	            
	            if(InPutFile.exists()){
	            	
	            	String OutPutFileInformation = outputDir + outputFileName; 
	            	
	            	File OutPutFile = new File(OutPutFileInformation); 
	            	
	            	Thumbnails.of(InPutFileInformation).scale(1f).outputQuality(IntialCompressRate).toFile(OutPutFile);
	            	
	            	System.out.println(OutPutFileInformation+"压缩比率"+IntialCompressRate+"文件压缩成功");
	            	                
	            }
	                      
	            else{
	            	return InPutFileInformation + "找不到这个压缩文件";
	            }
	            
	         } catch (IOException ex) {  
	        	System.out.println(ex);
	        	System.out.println(InPutFileInformation+"压缩比率"+IntialCompressRate+"文件压缩不成功");
	            ex.printStackTrace();  
	            return inputFileName;  
	        }  
	        
	        return outputFileName;  
	    }  

	  
	  

}
